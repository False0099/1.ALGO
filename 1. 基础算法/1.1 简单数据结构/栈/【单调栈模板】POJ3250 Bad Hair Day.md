# [USACO 06 NOV] Bad Hair Day S

## 题目描述

农夫约翰有 $N$ 头奶牛正在过乱头发节。

每一头牛都站在同一排面朝右，它们被从左到右依次编号为 $1, 2, \cdots, N$。编号为 $i$ 的牛身高为 $h_i$。第 $N$ 头牛在最前面，而第 $1$ 头牛在最后面。

对于第 $i$ 头牛**前面**的第 $j$ 头牛，如果 $h_i>h_{i+1}, h_i>h_{i+2}, \cdots, h_i>h_j$，那么认为第 $i$ 头牛可以看到第 $i+1$ 到第 $j$ 头牛。

定义 $C_i$ 为第 $i$ 头牛所能看到的牛的数量。请帮助农夫约翰求出 $C _ 1 + C _ 2 + \cdots + C _ N$。

## 输入格式

输入共 $N + 1$ 行。

第一行为一个整数 $N$，代表牛的个数。  
接下来 $N$ 行，每行一个整数 $a _ i$，分别代表第 $1, 2, \cdots, N$ 头牛的身高。

## 输出格式

输出共一行一个整数，代表 $C _ 1 + C _ 2 + \cdots + C _ N$。

## 样例 #1

### 样例输入 #1

```
6
10
3
7
4
12
2
```

### 样例输出 #1

```
5
```

## 提示

### 数据规模与约定

对于 $100\%$ 的数据，保证 $1 \leq N \leq 8 \times 10 ^ 4$，$1 \leq h _ i \leq 10 ^ 9$。

## 题解
我们这一题是我们的一个单调栈的标准例题。我们这一题，我们记录每一个牛被弹出的位置，如果没有被弹出就认为是最远端，对于我们的上述数据进行处理后就是我们的答案。

我们的单调栈就能够维护一个“最长阶梯”，这里，我们的阶梯要求满足我们是随着我们的数据的增加氮掉递增的。


```cpp
#include<bits/stdc++.h>
using namespace std;
int n,t;
long long ans; //注意要开long long 
stack <int> a;
int main() {
	cin>>n;
	for (int i=1; i<=n; i++) {
		cin>>t;
		while (!a.empty()&&a.top()<=t)  
			a.pop();
		ans+=a.size();
		a.push(t);
	}
	cout<<ans;
	return 0;
}
```