有 $n$ 堆石头，第 $i$ 堆个数为 $a_i$。每次随机选一个石头然后把那一整堆都扔了，求第 1 堆石头期望第几次被扔。

设随机变量 $x_i$ 表示第 $i$ 堆石头是第几个被拿走的，显然我们有

$$
x_1=1+\sum_{i=2}^n[x_i<x_1]
$$

于是我们要求 $E(x_1)$ ,根据期望的线性性转化为 $E([x_i<x_1])$ ,由于艾弗森括号表达式是一个布尔表达式，因此这个期望等价于 $P(x_i<x_1)$,于是得到

$$
E(x_1)=1+\sum_{i=2}^nP(x_i<x_1)
$$

而根据 E 4（随机一个长度为 n 的排列，问 i 在 j 后面的概率）, 我们稍作拓展，其实 $\frac{a_i}{\sum_{i=1}^na_i}$ 表示的就是第 $i$ 堆石子被拿走的概率。因此 $P(x_i<x_1)$ 表示的就是第 $i$ 堆石子比第 1 堆石子先被拿走的概率，显然为 $\frac{a_i}{a_i+a_1}$ ,于是得到

$$
E(x_1)=1+\sum_{i=2}^n\frac{a_i}{a_i+a_1}
$$
