# [HNOI 2004] 树的计数

## 题目描述

一个有 $n$ 个节点的树，设它的节点分别为 $v_1,v_2,\ldots,v_n$，已知第 $i$ 个节点 $v_i$ 的度数为 $d_i$，问满足这样的条件的不同的树有多少棵。

## 输入格式

输入文件第一行是一个正整数 $n$ ，表示树有 $n$ 个结点。第二行有 $n$ 个数，第 $i$ 个数表示 $d_i$，即树的第 $i$ 个结点的度数。

## 输出格式

输出满足条件的树有多少棵。

## 样例 #1

### 样例输入 #1

```
4                     
2 1 2 1
```

### 样例输出 #1

```
2
```

## 提示

$1\le n\le 150$，保证满足条件的树不超过 $10^{17}$ 个。

## 题解
Prufer 数列是无根树的一种数列。在组合数学中，Prufer 数列由有一个对于顶点标过号的树转化来的数列，点数为 n 的树转化来的 Prufer 数列长度为 n-2。

### 构造方法
1. 找到编号最小的度数为1的点
2. 删除该节点并在序列中添加与该节点相连的节点的编号
3. 重复1,2操作，直到整棵树只剩下两个节点

### 转换方法
1. 每次取出 prufer 序列中最前面的元素 u
2. 在点集中找到编号最小的没有在prufer序列中出现的元素v
3. 给u,v连边然后分别删除
4. 最后在点集中剩下两个节点，给它们连边

### 性质 ：
1. prufer 序列中某个编号出现的次数就等于这个编号的节点在无根树中的度数-1 (如果某个节点度数为 1，那么会被直接删掉，否则每少掉一个相邻的结点，他就会在序列中出现 1 次)
    
2. 一棵n个节点的无根树唯一地对应了一个长度为n-2的数列，数列中的每个数都在1到n的范围内。
    
3. n 个点的无向完全图的生成树的计数：$n^{n-2}$，即 n 个点的有标号无根树的计数。
对一个 n 个点的无根树，他的 prufer 序列长为 $n-2$,而我们每一个位置有 n 种可能性，因此可能的 $prufer$ 序列有 $n^{n-2}$ 种
    
4. n 个节点的度依次为 d1,d2,…,dn 的无根树共有 $\frac{(n−2)!}{∏_{i=1}^n(di−1)}$ 个，因为此时 Prufer 编码中的数字 i恰好出现 di−1次，(n−2)!是总排列数

上述公式使我们的可重全排列公式，即**全排列个数除以重复元素内部的全排列个数**。

1. n 个点的有标号有根树的计数：$n^{n-1}$
```python
n=(int)(input())#读入n
if n==1:#特判n=1的情况
    x=(int)(input());#读入唯一的节点度数
    if x==0:print(1);#如果这个节点度数为0，说明只有一种解法
    else:print(0);#否则，无解
    exit();#退出程序
f=[0 for i in range(n+5)];f[0]=1;#建立阶乘数组
for i in range(1,n+1):f[i]=f[i-1]*i;#预处理阶乘
ans=f[n-2];tot=0;s=input().split();#初始化ans为(n-2)!，用tot统计度数和来判断是否无解
for i in range(n):
    x=(int)(s[i]);
    if x==0:print(0);exit();#如果存在某个点度数为0，说明图不连通，输出0
    tot+=x-1;ans//=f[x-1];#统计度数和，更新答案
if(tot==n-2):print(ans);#如果度数和为n-2，输出ans
else:print(0);#否则无解
```
```