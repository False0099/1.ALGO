# [ABC 172 E] NEQ

## 题面翻译

给定 $N$，$M$。

构造长为 $N$ 的整数序列 $A,B$ ，满足：

- $1 \leq A_i,B_i \leq M$
- $\forall i\neq j$，$A_i\neq A_j,B_i\neq B_j$
- $\forall i$，$A_i\neq B_i$

求合法构造方案数，对 $10^9+7$ 取模。

## 题目描述

[problemUrl]: https://atcoder.jp/contests/abc172/tasks/abc172_e

$ 1 $ 以上 $ M $ 以下の整数からなる長さ $ N $ の数列 $ A_1, A_2,\cdots,\ A_{N} $ と $ B_1, B_2,\cdots,\ B_{N} $ の組であって、以下の条件をすべて満たすものの個数を求めてください。

- $ 1\leq\ i\leq\ N $ なる任意の $ i $ について $ A_i\ \neq\ B_i $
- $ 1\leq\ i\ <\ j\leq\ N $ なる任意の $ (i, j) $ について $ A_i\ \neq\ A_j $ かつ $ B_i\ \neq\ B_j $

ただし、答えは非常に大きくなる可能性があるので、$ (10^9+7) $ で割ったあまりを出力してください。

## 输入格式

入力は以下の形式で標準入力から与えられる。

> $ N $ $ M $

## 输出格式

答えを $ (10^9+7) $ で割ったあまりを出力せよ。

## 样例 #1

### 样例输入 #1

```
2 2
```

### 样例输出 #1

```
2
```

## 样例 #2

### 样例输入 #2

```
2 3
```

### 样例输出 #2

```
18
```

## 样例 #3

### 样例输入 #3

```
141421 356237
```

### 样例输出 #3

```
881613484
```

## 提示

### 制約

- $ 1\leq\ N\ \leq\ M\ \leq\ 5\times 10^5 $
- 入力はすべて整数

### Sample Explanation 1

$ A_1=1, A_2=2, B_1=2, B_2=1 $ のときと $ A_1=2, A_2=1, B_1=1, B_2=2 $ のとき条件が満たされます。

## 题解
本题我们是一个关于我们的排列的计数问题，我们对于排列的计数，我们的设计 DP 的思路都是：设置一个 $f[i]$ 表示我们进行到前 i 个元素后，我们的答案是多少。

当然，我们的这一题比较特殊，我们这一题还需要通过我们的一个错位排列来进行处理。

首先，确定序列 $A$ 的个数，显然应该是 $A_M^N$。

接下来我们考虑对于一个固定的 $A$,如何求出合法的 $B$。
我们继续沿用 $D(n)$ 的定义。不考虑多余元素的情况下，公式仍然是 $D(n)=(n-1)\times(D(n-$
$2)+D(n-1)$
然而，由于我们此时的选数范围不只局限在 $[1,N]$,而是扩大到了 $[1,M]$。所以我们再次看一下放置第
$n$ 个元素的方案。
在放入第 $n$ 个元素时，我们可以选 $A$ 数列中没有出现的元素 (如果这个元素被当前元素之前的元素选过了，那我们就选这个元素本身对应的 $A$ 数列的元素，其效果是相同的), 总共 $(M-N)$ 个。(题目保证了 $N\leq M$,所以是对的)
所以再根据加法原理，答案应该是 $D(n)=(M-N)\times D(n-1)+(n-1)\times(D(n-2)+$
$D(n-1))$,注意这里区分是题目中给出的大 $N,M$ 和枚举时的小 $n$。
递推求解即可，此时边界条件是 $D(0)=1,D(1)=M-N.$

最后结果就是 $A_M^N\times D(N)$。